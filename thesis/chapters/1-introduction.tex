OSA là một rối loạn hô hấp khi ngủ do sự hẹp hoặc tắc nghẽn một phần hay toàn
bộ đường hô hấp trên, bao gồm vùng mũi họng, hầu họng hoặc cả hai. Tình trạng
này được đặc trưng bởi các cơn ngưng thở hoặc giảm thở ngắn, lặp đi lặp lại
trong khi ngủ, gây gián đoạn giấc ngủ do thức giấc thường xuyên và dẫn đến giảm
oxy máu từng đợt. Tỷ lệ hiện mắc OSA tại Việt Nam ước tính khoảng 8,5\%
\cite{nguoimacOSA_VN}. OSA hiện được công nhận là một yếu tố có nguy cơ độc lập
đối với nhiều bệnh lý liên quan đến tim mạch, đặc biệt là tăng huyết áp. Ngoài
ra, hội chứng này còn có mối liên hệ đáng kể với các nguy cơ như tai nạn giao
thông, tai nạn lao động dẫn đến làm gia tăng gánh nặng kinh tế xã
hội\cite{osa_bike}\cite{Marin2005}. Đáng chú ý, tình trạng ngưng thở khi ngủ
kéo dài và không được phát hiện, điều trị có thể ảnh hưởng nghiêm trọng đến sức
khỏe gây ra rối loạn nhịp tim và một trong những nguyên nhân gây đột tử
\cite{sumarry_osa}. Theo PSG.TS Nguyễn Thy Khuê, Hội Y học Giấc ngủ Việt Nam,
ngưng thở khi ngủ còn là một trong nhưng dấu hiệu rõ ràng của bệnh đái tháo
đường, bệnh thận. OSA được phát hiện ở hơn 20\% người bệnh đái tháo đường và
làm trầm trọng thêm các rối loạn chuyển hóa, đặc biệt là đái tháo đường type 2.
Trong một nghiên cứu tiêu biểu tại Việt Nam, GS.TS.BS. Dương Quý Sỹ và cộng sự
đã khảo sát 524 trẻ em mắc rối loạn tăng động giảm chú ý (Attention Deficit
Hyperactivity Disorder - ADHD) tại Bệnh viện Nhi Trung ương Việt Nam
\cite{ThaySUCHildren}. Kết quả cho thấy tỷ lệ mắc (OSA) ở nhóm này là 23.3\%,
trong đó chủ yếu ở mức độ trung bình đến nặng. Nghiên cứu cũng đồng thời xác
định mối tương quan đáng kể giữa mức độ nghiêm trọng của OSA và các triệu chứng
mất tập trung, tăng động, rối loạn hành vi, lo âu và trầm cảm.

Tư thế ngủ được xem là một trong những yếu tố quan trọng có thể làm trầm trọng
thêm tình trạng ngưng thở khi ngủ, đặc biệt là ở tư thế nằm ngửa. Dạng đặc biệt
của hội chứng này được gọi là ngưng thở khi ngủ do tư thế (Positional
Obstructive Sleep Apnea – pOSA). Theo tiêu chuẩn chẩn đoán, bệnh nhân được xác
định mắc pOSA khi chỉ số Apnea–Hypopnea Index (AHI) lớn hơn 5, đồng thời giá
trị AHI ở tư thế nằm ngửa cao gấp ít nhất hai lần so với khi nằm ở các tư thế
khác \cite{heinzer2018}. Các nghiên cứu gần đây cho thấy tỷ lệ hiện mắc pOSA
chiếm tới khoảng 50\% trong tổng số bệnh nhân OSA \cite{sabil2020}. Phát hiện
này nhấn mạnh rằng tư thế ngủ có ảnh hưởng sinh lý rõ rệt đến mức độ xẹp của
đường hô hấp trên, đặc biệt ở tư thế nằm ngửa, làm gia tăng nguy cơ tắc nghẽn
đường thở.

Việc chẩn đoán (OSA) hiện nay chủ yếu được thực hiện thông qua hai phương pháp:
đa ký giấc ngủ (Polysomnography – PSG) và thiết bị kiểm tra giấc ngủ tại nhà
(Home Sleep Test – HST). Trong đó, PSG được xem là tiêu chuẩn vàng trong việc
đánh giá OSA. Nó thường được thực hiện tại bệnh viện hoặc trung tâm giấc ngủ.
Thông thường, bệnh nhân sẽ được yêu cầu đến vào buổi tối để trung tâm có thể
ghi lại và theo dõi giấc ngủ ban đêm của bệnh nhân. Đôi khi, PSG được thực hiện
vào ban ngày để phù hợp với những người làm việc theo ca, những người đã quen
với việc ngủ ban ngày. Quá trình đo PSG phải được thực hiện dưới sự giám sát
trực tiếp của bác sỹ chuyên ngành giấc ngủ hoặc kĩ thuật viên có chuyên
môn\cite{psg_paper}\cite{kushida2005psg}. Trong khi bạn ngủ, kỹ thuật viên sẽ
theo dõi sóng não, chuyển động mắt, nhịp tim, nhịp thở, nồng độ oxy trong máu,
tư thế và chuyển động cơ thể, tiếng ngáy và các tiếng ồn khác mà bạn có thể
phát ra khi ngủ. Tất cả các phép đo này sẽ được ghi lại trên biểu đồ. Trong quá
trình nghiên cứu, kỹ thuật viên có thể yêu cầu bạn sử dụng máy thở áp lực dương
(PAP) nếu bạn có dấu hiệu ngưng thở khi ngủ. PAP là một thiết bị mặt nạ cung
cấp không khí với mức oxy phù hợp thông qua miệng hoặc ống mũi để hỗ trợ trong
trường hợp khó thở.

Mặc dù PSG vẫn giữ vai trò là phương pháp tham chiếu trong chẩn đoán và theo
dõi chất lượng giấc ngủ cũng như các rối loạn liên quan, nhưng việc triển khai
kỹ thuật này thường đòi hỏi chi phí cao, trang thiết bị chuyên dụng và điều
kiện thực hiện tại các cơ sở y tế chuyên khoa. Một thách thức khác của PSG là
người bệnh thường cảm thấy bất tiện và cảm giác khó chịu do mang nhiều cảm biến
gắn trên cơ thể trong suốt đêm, dẫn đến nguy cơ gián đoạn hoặc sai lệnh dữ liệu
trong quá trình ghi nhận. Vì vậy, các hệ thống HST đang ngày càng thu hút sự
quan tâm từ cộng đồng khoa học toàn
cầu\cite{e3hst}\cite{hstSurvey}\cite{hst_paper}. Các thiết bị HST hiện đại dùng
các cảm biến không xâm lấn nhằm ghi nhận và phân tích một số tín hiệu sinh lý
cơ bản như luồng khí hô hấp, tư thế ngủ, áp suất mũi, độ bão hòa oxy và nhịp
tim. Việc cải thiện chất lượng, kéo dài thời lượng sử dụng và tăng độ chính xác
và cải thiện mức độ thoải mái vẫn là những thách thức lớn đối với giới nghiên
cứu và các nhà sản xuất thiết bị y tế. Tuy nhiên, với những tiến bộ công nghệ
đang diễn ra nhanh chóng, HST có tiềm năng trở thành một công cụ chẩn đoán quan
trọng và được ứng dụng rộng rãi trong lâm sàng. Điều này không chỉ mang lại sự
thuận tiện và chấp nhận cao hơn từ phía người bệnh, mà còn góp phần làm giảm
gánh nặng chi phí và áp lực cho hệ thống chăm sóc sức khỏe.

Trong những năm gần đây, nhiều nhóm nghiên đang chú trọng nghiên cứu, phát
triển hệ thống HST nhằm mục đích thay thế hoặc hỗ trợ cho đa ký giấc ngủ. Năm
2011, Collop và cộng sự đã phát triển một hệ thống phân loại SCOPER (Sleep,
Cardiovacular, Oximetry, Position, Effort, and Respiration) để đánh giá các tín
hiệu sinh lý thu nhận trong việc chẩn đoán OSA\cite{hst_6p_paper}. Tác giả
Morillo D và cộng sự đề xuất một phương pháp sàng lọc ngưng thở tắc nghẽn khi
ngủ dựa trên cảm biến gia tốc gắn tại vị trí hõm ức, cho phép trích xuất các
tín hiệu hô hấp, tim mạch và tiếng ngáy bằng kỹ thuật xử lý tín hiệu số, từ đó
chứng minh tính khả thi của thiết bị di động đơn giản và chi phí thấp trong hỗ
trợ chẩn đoán hội chứng ngưng thở – giảm thở khi
ngủ\cite{morillo2010accelerometer}. Trong nhóm các thiết bị đeo, A.H. Yüzer và
cộng sự đã phát triển thiết bị đeo tay sử dụng cảm biến gia tốc ADXL345 để phát
hiện và phát tín hiệu rung khi cảnh báo. \cite{hst_wear_paper}. Tương tự, nhóm
Yunyoung Nam và cộng sự cũng đã tích hợp hệ thống thu thập, phân tích sử dụng
một cảm biến gia tốc ba trục và một cảm biến áp suất để giám sát chất lượng
giấc ngủ tư thế ngủ, trạng thái ngủ, giai đoạn ngủ (REM và chu kỳ giai đoạn ngủ
không REM) \cite{hst_pressure_paper}. Tại Việt Nam, nhóm nghiên cứu của Giáo sư
Lê Tiến Thường, trường đại học Bách Khoa TP Hồ Chí Minh đã sử dụng cảm biến gia
tốc MPU6050 cùng với vi xử lý ESP32 nhằm ghi nhận hơi thở và nhịp tim của bệnh
nhân OSA thông qua rung động, và dòng chảy của động mạch và tĩnh mạch ở cổ
\cite{thuong_wear_paper}.

Trong các phương pháp tiếp cận hiện nay, phần lớn đều ứng dụng các mô hình học
máy nhằm khai thác hiệu quả tín hiệu sinh lý (như ECG, PPG và accelerometer) để
phát hiện các sự kiện hô hấp bất thường cũng như phân loại mức độ nghiêm trọng
của OSA một cách tự động, nhanh chóng và chính xác \cite{osa_sanchez2025}.
Trong số các thuật toán học máy truyền thống, Random Forest (RF) đã được chứng
minh là một trong những phương pháp hiệu quả nhất nhờ khả năng kháng quá khớp
và độ chính xác cao, với độ chính xác trên 93\% trong nhiều nghiên cứu
\cite{genuer2020random,wang2023ml_wearable}. SVM, KNN và LDA cũng được sử dụng
phổ biến nhờ khả năng phân loại mạnh mẽ và khả năng thích ứng với nhiều loại dữ
liệu sinh lý \cite{cortes1995svm, cunningham2007knn, tharwat2017lda}. Bên cạnh
đó, các thuật toán tiên tiến như XGBoost đã được triển khai để tăng tốc huấn
luyện và cải thiện hiệu suất trong các hệ thống học máy gọn nhẹ (TinyML) phục
vụ chẩn đoán lâm sàng \cite{chen2016xgboost}.

Bên cạnh các thuật toán học máy truyền thống, các mô hình học sâu (deep
learning) như mạng nơ-ron nhân tạo (ANN), mạng nơ-ron tích chập (CNN), và mạng
nơ-ron sâu (DNN) đã cho thấy hiệu quả vượt trội trong việc xử lý tín hiệu sinh
lý phức tạp và nhận diện sự kiện hô hấp liên quan đến OSA. Nhiều nghiên cứu đã
ứng dụng các kiến trúc CNN một chiều (1D-CNN), mạng kết hợp CNN–RNN, và mạng
tích chập đa tầng để phát hiện nhịp thở bất thường và ước lượng chỉ số AHI với
độ chính xác có thể đạt trên 90\%
\cite{HOANG2025116309,Sleep_Posture_Detection}. Các mô hình này tận dụng khả
năng tự động trích chọn đặc trưng từ dữ liệu cảm biến thô, hỗ trợ phát hiện OSA
theo thời gian thực và tối ưu hóa hiệu năng. Những kết quả này khẳng định tiềm
năng lớn của học sâu trong việc xây dựng các hệ thống giám sát giấc ngủ thế hệ
mới, đặc biệt là trên các nền tảng nhúng và thiết bị đeo thông minh.

Còn đối với bài toán phân loại tư thế ngủ ở người, tác giả Xi Xu và cộng sự đã
đề xuất một mô hình học máy stacking cải tiến, kết hợp ba thuật toán mạnh
(XGBoost, SVM, DNDT) và tối ưu bằng Bayesian optimization cùng phương pháp
entropy weighting để nhận dạng tư thế ngủ dựa trên dữ liệu áp suất từ nệm khí
\cite{xu2024classification}. Kết quả thực nghiệm cho thấy mô hình đạt độ chính
xác 94.48\%, vượt trội hơn các mô hình đơn lẻ và có tiềm năng ứng dụng trong
các hệ thống giám sát giấc ngủ thông minh. Trong một nghiên cứu khác, tác giả
giới thiệu một thiết bị đeo di động sử dụng cảm biến gia tốc đơn để nhận diện
mười hai tư thế ngủ, hỗ trợ bệnh nhân GERD cải thiện thói quen và chất lượng
giấc ngủ tại nhà \cite{Vu2025SleepPosition}. Mô hình AnpoNet kết hợp 1D-CNN và
LSTM, đạt độ chính xác 94,67\% và F1-score 92,94\%, cho thấy tiềm năng ứng dụng
thực tiễn trong giám sát tư thế ngủ không xâm lấn

Với mục tiêu triển khai hệ thống trên thiết bị đeo có tài nguyên tính toán hạn
chế, việc áp dụng các thuật toán học máy nhẹ (TinyML) đóng vai trò then chốt.
Khác với các mô hình học sâu truyền thống yêu cầu phần cứng mạnh và tiêu tốn
năng lượng, TinyML cho phép thực thi mô hình trực tiếp trên vi điều khiển có
dung lượng bộ nhớ và tốc độ xử lý thấp, đồng thời đảm bảo độ trễ tối thiểu và
khả năng hoạt động ngoại tuyến. Đặc điểm này đặc biệt phù hợp cho các ứng dụng
y sinh tại nhà, nơi thiết bị cần hoạt động liên tục, chi phí thấp và không phụ
thuộc vào kết nối mạng.

Tiny machine learning tập trung vào việc giảm thiểu số lượng tham số mô hình và
độ phức tạp tính toán, nhờ đó trở thành một hướng tiếp cận đầy hứa hẹn trong
các ứng dụng chăm sóc sức khỏe thông minh
\cite{ray2021tinyml,diab2022embedded}. Tuy nhiên, vẫn tồn tại sự đánh đổi giữa
việc đơn giản hóa mô hình và duy trì độ chính xác trong phân loại. Bài toán đặt
ra là làm sao tối ưu hóa đồng thời kích thước mô hình, tốc độ xử lý và hiệu
suất trong việc phân loại tình trạng OSA, nhận diện tư thế, đảm bảo hệ thống
vừa đủ nhẹ để chạy trên phần cứng nhúng, vừa đủ chính xác để có giá trị trong
giám sát y tế.

Các nghiên cứu trước đây đã chứng minh hiệu quả của học máy trong phân loại tư
thế ngủ và phát hiện OSA, tuy nhiên phần lớn các hệ thống vẫn phụ thuộc vào dữ
liệu đa kênh phức tạp, mô hình tính toán nặng, hoặc cần xử lý tập trung trên
máy chủ. Điều này gây hạn chế khi triển khai thực tế tại nhà hoặc trên thiết bị
đeo. Hơn nữa, vẫn còn thiếu các giải pháp tích hợp đầy đủ từ thu thập, xử lý,
đến phân loại tín hiệu ngay trên vi điều khiển với độ trễ thấp và khả năng hoạt
động độc lập không cần kết nối mạng. Qua đó, luận văn này đề xuất một hướng
tiếp cận sử dụng TinyML tại biên, nhằm xây dựng một hệ thống theo dõi tư thế
ngủ, có tiềm năng hỗ trợ sàng lọc pOSA theo thời gian thực. Thiết bị được thiết
kế theo hướng đeo được, nhỏ gọn, chi phí thấp, cho phép ghi nhận và phân loại
chính xác các tư thế ngủ: nằm ngửa, nằm sấp, nằm nghiêng trái và phải. Hệ thống
tích hợp khả năng thu thập – xử lý – phân loại ngay trên vi điều khiển, hướng
tới độ chính xác cao, độ trễ thấp và khả năng triển khai tại nhà với chi phí
hợp lý. Tuy chưa thực hiện chức năng sàng lọc OSA, hệ thống được xây dựng như
một nền tảng kỹ thuật tiềm năng, phục vụ cho các nghiên cứu ứng dụng trong
tương lai, đặc biệt là hỗ trợ đánh giá nguy cơ pOSA dựa trên tư thế ngủ.

Mục tiêu cụ thể của khóa luận gồm: 01) Nghiên cứu, đề xuất hệ thống phần cứng
phục vụ đo lường, thu thập, xử lý tín hiệu gia tốc kèm với hiệu năng phù hợp
cho việc triển khai mô hình học máy tại biên trong bài toán phân loại tư thế
ngủ ở người; 02) Nghiên cứu, đề xuất những mô hình học máy thích hợp trong việc
phân loại tư thế ngủ ở người dựa trên những đặc trưng của tín hiệu gia tốc được
trích xuất từ bộ dữ liệu cảm biến do nhóm nghiên cứu thu thập; 03) Chuẩn
hóa,thực thi, đánh giá mô hình học máy trên vi điều khiển Nordic nRF52840, nhằm
kiểm chứng hoạt động thực tế của hệ thống nhận dạng tư thế ngủ tại biên;

Cấu trúc luận văn được trình bày trong ba chương chính như sau:

\noindent\textbf{Chương 1:} Hội chứng ngưng thở khi ngủ do tắc nghẽn (OSA): Ảnh hưởng của tư thế ngủ và các tiến bộ công nghệ trong giám sát tư thế ngủ tự động

\noindent\textbf{Chương 2:} Xây dựng hệ thống thu thập dữ liệu, huấn luyện,
đánh giá
mô hình học máy.

\noindent\textbf{Chương 3:} Xây dựng phần cứng, triển khai tại biên.
