\begin{lstlisting}[float,language=JavaScript,caption=Ví dụ áp dụng \gls{mocking} đối với mã nguồn dự án sử dụng framework NestJS, label=mock_example,captionpos=b]
it("first test", (done) => {
    const body = {...}; (*@\label{input_declaration}@*)  // input generated by the two methods
    const response: AxiosResponse < any > = {(*@\label{mock_declare_response}@*)// initialize mock data
        data: {}, headers: {}, config: {},
        status: 200, statusText: 'OK'};
    // set mock data to method accessing database
    jest.spyOn(controller_class, "get")
        .mockResolvedValue( of(response).toPromise()); (*@\label{mock_spy}@*)
    // send request data to the tested API
    return request(server)
    .post("/search") (*@\label{begin_test_driver}@*)
    .send(body)  (*@\label{end_test_driver}@*)
    .expect(201).then(res => {
        console.log(res.body);
        expect(res.body).not.toBeNull();
        done();
    })
});
\end{lstlisting}